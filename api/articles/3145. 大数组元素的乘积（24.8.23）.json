{"title":"3145. 大数组元素的乘积（24.8.23）","uid":"3b903ad0609a994931dc6b6a42c85357","slug":"3145. 大数组元素的乘积（24.8.23）","date":"2024-08-23T16:18:43.997Z","updated":"2024-09-04T11:35:01.082Z","comments":true,"path":"api/articles/3145. 大数组元素的乘积（24.8.23）.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2024/09/04/9813f071f456e3ba.png","content":"<h2 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h2><p>今日每日一题难度较大，根据 <a href=\"https://leetcode.cn/problems/find-products-of-elements-of-big-array/solutions/2774549/olog-shi-tian-fa-pythonjavacgo-by-endles-w2l4\">灵茶山艾府</a> 的代码进行学习研究</p>\n<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><p>一个非负整数<code>x</code>的强数组指的是满足元为 2 的且元素总和为<code>x</code>的有序数。下表说明了如何确定强数的示例,可以证明,对应的数组是独一无二的。</p>\n<table>\n<thead>\n<tr>\n<th>数字</th>\n<th>二进制表示</th>\n<th>强数组</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>00001</td>\n<td>[1]</td>\n</tr>\n<tr>\n<td>8</td>\n<td>01000</td>\n<td>[8]</td>\n</tr>\n<tr>\n<td>10</td>\n<td>01010</td>\n<td>[2, 8]</td>\n</tr>\n<tr>\n<td>13</td>\n<td>01101</td>\n<td>[1, 4, 8]</td>\n</tr>\n<tr>\n<td>23</td>\n<td>10111</td>\n<td>[1, 2, 4, 16]</td>\n</tr>\n</tbody></table>\n<p>我们将一个升序的正整数 1(即 1,2,3 等等)的强数组连接得组<code>big_nums</code>，<code>big_nums</code>开始部分为：<code>[1, 2, 1, 2, 4, 1, 4, 2, 4, 1, 2, 4, 8, ...]</code></p>\n<p>给你一个二维整数数组<code>queries</code>，其中<code>queries[i] = [fromi, toi, modi]</code>，你需要计算<code>(big_nums[fromi] * big_nums[fromi + 1] * ... * big_nums[toi]) % modi</code></p>\n<p>请你返回一个整数数组<code>answer</code>，其中<code>answer[i]</code>是第<code>i</code>个查词的答案。</p>\n<p>示例 1:</p>\n<p>输入：<code>queries = [[3,7]]</code></p>\n<p>输出：<code>[4]</code></p>\n<p>解释：</p>\n<p>只有一个查询。</p>\n<p><code>big_ums[1..3] = [2.1.2]</code>，它们的积为 4，结果为<code>4 mod 7 = 4</code>。<br><br></p>\n<p>示例 2:</p>\n<p>输入：<code>queries = [[1,2,5],[3,7,3],[7,7,4]]</code></p>\n<p>输出：<code>[2,2]</code></p>\n<p>解释：</p>\n<p>有两个查询。</p>\n<p>第一个查询：<code>big_nua[2..5] = [1.2,4,2]</code>，它们的所积为 8，结果为<code>8 mod 3 = 2</code>。</p>\n<p>第二个查询：<code>big_nuas[7]</code>，结果为<code>2 mod 4 = 2</code>。</p>\n<p>提示:</p>\n<p>· <code>1 &lt;= queries.length &lt;= 500</code></p>\n<p>· <code>queries[i].length = 3</code></p>\n<p>· <code>queris[i][0] &lt;= quers[i][1] &lt;= 10^15</code></p>\n<p>· <code>1 &lt;= queries[i][2] &lt;= 10^5</code></p>\n<h2 id=\"解题思路\"><a href=\"#解题思路\" class=\"headerlink\" title=\"解题思路\"></a>解题思路</h2><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">强数组：</span><br><span class=\"line\">###概念说明：</span><br><span class=\"line\"></span><br><span class=\"line\">    ###（<span class=\"number\">1</span>） 强数组 ：</span><br><span class=\"line\">         例如： <span class=\"number\">10</span>                   【强数组为：<span class=\"number\">2</span>，<span class=\"number\">8</span>】</span><br><span class=\"line\">         位数： <span class=\"number\">4</span> | <span class=\"number\">3</span> | <span class=\"number\">2</span> | <span class=\"number\">1</span> | <span class=\"number\">0</span>   【二进制的位数】</span><br><span class=\"line\">         转化： <span class=\"number\">0</span> | <span class=\"number\">1</span> | <span class=\"number\">0</span> | <span class=\"number\">1</span> | <span class=\"number\">0</span>   【转化为二进制】</span><br><span class=\"line\">    强数组： </span><br><span class=\"line\">             第 <span class=\"number\">1</span> 位是 <span class=\"number\">1</span> 则有一个强数组的数：<span class=\"number\">2</span>^<span class=\"number\">1</span>  --&gt; <span class=\"number\">2</span> </span><br><span class=\"line\">             第 <span class=\"number\">3</span> 位是 <span class=\"number\">3</span> 则有一个强数组的数：<span class=\"number\">2</span>^<span class=\"number\">3</span>  --&gt; <span class=\"number\">8</span></span><br><span class=\"line\">        强数组为这些数的集合：[<span class=\"number\">2</span>,<span class=\"number\">8</span>]</span><br><span class=\"line\">      总结为：</span><br><span class=\"line\">             第 i 位是 <span class=\"number\">1</span> 则有一个强数组的数：<span class=\"number\">2</span>^i </span><br><span class=\"line\">             由这样的数组成的集合为 强数组</span><br><span class=\"line\">    </span><br><span class=\"line\">    ###（<span class=\"number\">2</span>） big_nums ：</span><br><span class=\"line\">         由 <span class=\"number\">1</span>，<span class=\"number\">2</span>，<span class=\"number\">3</span>，<span class=\"number\">4</span>，...，n 的强数组拼接而成的强数组</span><br><span class=\"line\"></span><br><span class=\"line\">    ###（<span class=\"number\">3</span>） (big_nums[fromi] * big_nums[fromi + <span class=\"number\">1</span>] * ... * big_nums[toi]) % modi ：</span><br><span class=\"line\">         假设 big_nums 第 i 个数的幂表示为 <span class=\"number\">2</span>^<span class=\"built_in\">k</span>(i)</span><br><span class=\"line\">         假设 queries[i] = [a, b, modi]</span><br><span class=\"line\">         设：<span class=\"built_in\">SUM</span>( fromi , toi ) = big_nums[fromi] * big_nums[fromi + <span class=\"number\">1</span>] * ... * big_nums[toi]</span><br><span class=\"line\">         则计算变为： <span class=\"built_in\">SUM</span>( a , b ) % modi</span><br><span class=\"line\">             对于此处 SUM 而言：</span><br><span class=\"line\">                          <span class=\"built_in\">SUM</span>( a , b ) = big_nums[a] * big_nums[a + <span class=\"number\">1</span>] * ... * big_nums[b]</span><br><span class=\"line\">                              = (<span class=\"number\">2</span>^<span class=\"built_in\">k</span>(a))*(<span class=\"number\">2</span>^<span class=\"built_in\">k</span>(a<span class=\"number\">+1</span>))*(<span class=\"number\">2</span>^<span class=\"built_in\">k</span>(a<span class=\"number\">+2</span>))*...*(<span class=\"number\">2</span>^<span class=\"built_in\">k</span>(b))</span><br><span class=\"line\">                              = <span class=\"number\">2</span>^(<span class=\"built_in\">k</span>(a)+<span class=\"built_in\">k</span>(a<span class=\"number\">+1</span>)+...+<span class=\"built_in\">k</span>(b))</span><br><span class=\"line\">              </span><br><span class=\"line\">###问题转化：</span><br><span class=\"line\">           通过上述的（<span class=\"number\">3</span>），我们可以将 big_nums 记录强数组 转化为 记录强数组当中 <span class=\"number\">2</span> 的幂</span><br><span class=\"line\">                                  将 big_nums 之间的乘 转化为 幂的加法</span><br><span class=\"line\">                         ， 假设强数组前 i 个幂之和为 <span class=\"built_in\">sum</span>(i),则上方（<span class=\"number\">3</span>）中的<span class=\"built_in\">SUM</span>( a , b )=<span class=\"number\">2</span>^[<span class=\"built_in\">sum</span>(b)-<span class=\"built_in\">sum</span>(a)]</span><br><span class=\"line\">###列举：</span><br><span class=\"line\">数字(n)  强数组      转化为<span class=\"number\">2</span>的幂     <span class=\"built_in\">big_nums</span>(转化后的)                数组当中的个数(i)       <span class=\"built_in\">sum</span>(i)</span><br><span class=\"line\"><span class=\"number\">0</span>        []         []             []                                     <span class=\"number\">0</span>                 <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">1</span>        [<span class=\"number\">1</span>]        [<span class=\"number\">0</span>]            [<span class=\"number\">0</span>]                                    <span class=\"number\">1</span>                 <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"number\">2</span>        [<span class=\"number\">2</span>]        [<span class=\"number\">1</span>]            [<span class=\"number\">0</span>,<span class=\"number\">1</span>]                                  <span class=\"number\">2</span>                 <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"number\">3</span>        [<span class=\"number\">1</span>,<span class=\"number\">2</span>]      [<span class=\"number\">0</span>,<span class=\"number\">1</span>]          [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>]                              <span class=\"number\">4</span>                 <span class=\"number\">2</span></span><br><span class=\"line\"><span class=\"number\">4</span>        [<span class=\"number\">4</span>]        [<span class=\"number\">2</span>]            [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>]                            <span class=\"number\">5</span>                 <span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"number\">5</span>        [<span class=\"number\">1</span>,<span class=\"number\">4</span>]      [<span class=\"number\">0</span>,<span class=\"number\">2</span>]          [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>,<span class=\"number\">2</span>]                        <span class=\"number\">7</span>                 <span class=\"number\">6</span></span><br><span class=\"line\"><span class=\"number\">6</span>        [<span class=\"number\">2</span>,<span class=\"number\">4</span>]      [<span class=\"number\">1</span>,<span class=\"number\">2</span>]          [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>]                    <span class=\"number\">9</span>                 <span class=\"number\">9</span></span><br><span class=\"line\"><span class=\"number\">7</span>        [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>]    [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>]        [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>]              <span class=\"number\">12</span>                <span class=\"number\">12</span></span><br><span class=\"line\"><span class=\"number\">8</span>        [<span class=\"number\">8</span>]        [<span class=\"number\">3</span>]            [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]            <span class=\"number\">13</span>                <span class=\"number\">15</span></span><br><span class=\"line\">...      [...]      [...]          [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>,<span class=\"number\">2</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,...]        ???               ???</span><br><span class=\"line\"></span><br><span class=\"line\">###规律找寻：</span><br><span class=\"line\"></span><br><span class=\"line\">对于 i 而言，其值是其二进制当中 <span class=\"number\">1</span> 出现的个数：</span><br><span class=\"line\"> !!! 设 前 <span class=\"number\">2</span>^i 个强数组有 <span class=\"built_in\">a</span>(i) 个,则 前 <span class=\"number\">2</span>^(i<span class=\"number\">+1</span>) 个强数组有 <span class=\"built_in\">a</span>(i<span class=\"number\">+1</span>) 个</span><br><span class=\"line\">**********************</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">数字(n)  强数组      转化为<span class=\"number\">2</span>的幂     </span><br><span class=\"line\"><span class=\"number\">0</span>        []         []            </span><br><span class=\"line\"><span class=\"number\">1</span>        [<span class=\"number\">1</span>]        [<span class=\"number\">0</span>]            </span><br><span class=\"line\"><span class=\"number\">2</span>        [<span class=\"number\">2</span>]        [<span class=\"number\">1</span>]            </span><br><span class=\"line\"><span class=\"number\">3</span>        [<span class=\"number\">1</span>,<span class=\"number\">2</span>]      [<span class=\"number\">0</span>,<span class=\"number\">1</span>]         </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">4</span>        [<span class=\"number\">4</span>]        [<span class=\"number\">2</span>]             = [ ]   +  [<span class=\"number\">2</span>]         </span><br><span class=\"line\"><span class=\"number\">5</span>        [<span class=\"number\">1</span>,<span class=\"number\">4</span>]      [<span class=\"number\">0</span>,<span class=\"number\">2</span>]           = [<span class=\"number\">0</span>]   +  [<span class=\"number\">2</span>]</span><br><span class=\"line\"><span class=\"number\">6</span>        [<span class=\"number\">2</span>,<span class=\"number\">4</span>]      [<span class=\"number\">1</span>,<span class=\"number\">2</span>]           = [<span class=\"number\">1</span>]   +  [<span class=\"number\">2</span>]</span><br><span class=\"line\"><span class=\"number\">7</span>        [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>]    [<span class=\"number\">0</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>]         = [<span class=\"number\">0</span>,<span class=\"number\">1</span>] +  [<span class=\"number\">2</span>]     </span><br><span class=\"line\">         </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">a</span>(i<span class=\"number\">+1</span>) = <span class=\"built_in\">a</span>(i)*<span class=\"number\">2</span> + <span class=\"number\">2</span>^i</span><br><span class=\"line\"></span><br><span class=\"line\">**********************</span><br><span class=\"line\">前 <span class=\"number\">1</span>  个强数组的个数为 <span class=\"number\">0</span>  </span><br><span class=\"line\">前 <span class=\"number\">2</span>  个强数组的个数为 <span class=\"number\">1</span>  </span><br><span class=\"line\">前 <span class=\"number\">4</span>  个强数组的个数为 <span class=\"number\">4</span>  </span><br><span class=\"line\">前 <span class=\"number\">8</span>  个强数组的个数为 <span class=\"number\">12</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">a</span>(<span class=\"number\">0</span>)=<span class=\"number\">0</span> <span class=\"built_in\">a</span>(<span class=\"number\">1</span>)=<span class=\"number\">1</span> <span class=\"built_in\">a</span>(<span class=\"number\">2</span>)=<span class=\"number\">4</span> <span class=\"built_in\">a</span>(<span class=\"number\">3</span>)=<span class=\"number\">12</span></span><br><span class=\"line\">==&gt; <span class=\"built_in\">a</span>(i<span class=\"number\">+1</span>) = <span class=\"built_in\">a</span>(i)*<span class=\"number\">2</span> + <span class=\"number\">2</span>^i ==&gt;<span class=\"built_in\">a</span>(i<span class=\"number\">+1</span>)/(<span class=\"number\">2</span>^(i<span class=\"number\">+1</span>)) = <span class=\"built_in\">a</span>(i)/(<span class=\"number\">2</span>^i) + <span class=\"number\">1</span>/<span class=\"number\">2</span> 【等差数列】</span><br><span class=\"line\">--&gt; <span class=\"built_in\">a</span>(i)=i*<span class=\"number\">2</span>^(i<span class=\"number\">-1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">求前 k 个幂之和，则需要求的 k 个幂次是由多少个强数组组成的，即要找到一个最大的 n 使得 <span class=\"built_in\">a</span>(n)&lt;=k</span><br><span class=\"line\">!!! 采用 试填法 见下方代码</span><br><span class=\"line\"></span><br><span class=\"line\">求 幂次 之和：同上方 <span class=\"built_in\">a</span>() 的推倒过程</span><br><span class=\"line\"><span class=\"built_in\">sum</span>(i) = (i*(i<span class=\"number\">-1</span>)/<span class=\"number\">2</span>)*<span class=\"number\">2</span>^(i<span class=\"number\">-1</span>)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//快速幂：</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">pow</span><span class=\"params\">(<span class=\"type\">long</span> <span class=\"type\">long</span> x, <span class=\"type\">long</span> <span class=\"type\">long</span> n, <span class=\"type\">long</span> <span class=\"type\">long</span> mod)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"type\">long</span> <span class=\"type\">long</span> res = <span class=\"number\">1</span> % mod;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (; n; n /= <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (n % <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">                res = res * x % mod;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            x = x * x % mod;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">//试填法 </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">long</span> <span class=\"type\">long</span> <span class=\"title\">sum</span><span class=\"params\">(<span class=\"type\">long</span> <span class=\"type\">long</span> k)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"type\">long</span> <span class=\"type\">long</span> res = <span class=\"number\">0</span>, n = <span class=\"number\">0</span>, cnt1 = <span class=\"number\">0</span>, sum_i = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">long</span> <span class=\"type\">long</span> i = __lg(k + <span class=\"number\">1</span>); i; i--) &#123;</span><br><span class=\"line\">            <span class=\"type\">long</span> <span class=\"type\">long</span> c = (cnt1 &lt;&lt; i) + (i &lt;&lt; (i - <span class=\"number\">1</span>)); <span class=\"comment\">// 新增的幂次个数</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (c &lt;= k) &#123;</span><br><span class=\"line\">                k -= c;</span><br><span class=\"line\">                res += (sum_i &lt;&lt; i) + ((i * (i - <span class=\"number\">1</span>) / <span class=\"number\">2</span>) &lt;&lt; (i - <span class=\"number\">1</span>));</span><br><span class=\"line\">                sum_i += i; <span class=\"comment\">// 之前填的 1 的幂次之和</span></span><br><span class=\"line\">                cnt1++; <span class=\"comment\">// 之前填的 1 的个数</span></span><br><span class=\"line\">                n |= <span class=\"number\">1LL</span> &lt;&lt; i; <span class=\"comment\">// 填 1</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 最低位单独计算</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (cnt1 &lt;= k) &#123;</span><br><span class=\"line\">            k -= cnt1;</span><br><span class=\"line\">            res += sum_i;</span><br><span class=\"line\">            n |= <span class=\"number\">1</span>; <span class=\"comment\">// 最低位填 1</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 剩余的 k 个幂次，由 n 的低 k 个 1 补充</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (k--) &#123;</span><br><span class=\"line\">            res += __builtin_ctzll(n);</span><br><span class=\"line\">            n &amp;= n - <span class=\"number\">1</span>; <span class=\"comment\">// 去掉最低位的 1（置为 0）</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> res;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">findProductsOfElements</span><span class=\"params\">(vector&lt;vector&lt;<span class=\"type\">long</span> <span class=\"type\">long</span>&gt;&gt;&amp; queries)</span> </span>&#123;</span><br><span class=\"line\">        vector&lt;<span class=\"type\">int</span>&gt; ans;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span>&amp; q : queries) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> r = <span class=\"built_in\">sum</span>(q[<span class=\"number\">1</span>] + <span class=\"number\">1</span>);</span><br><span class=\"line\">            <span class=\"keyword\">auto</span> l = <span class=\"built_in\">sum</span>(q[<span class=\"number\">0</span>]);</span><br><span class=\"line\">            ans.<span class=\"built_in\">push_back</span>(<span class=\"built_in\">pow</span>(<span class=\"number\">2</span>, r - l, q[<span class=\"number\">2</span>]));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","feature":false,"text":"前言今日每日一题难度较大，根据 灵茶山艾府 的代码进行学习研究 题目一个非负整数x的强数组指的是满足元为 2 的且元素总和为x的有序数。下表说明了如何确定强数的...","permalink":"/post/3145. 大数组元素的乘积（24.8.23）","photos":[],"count_time":{"symbolsCount":"5.7k","symbolsTime":"5 mins."},"categories":[{"name":"力扣每日一题 - Cate","slug":"力扣每日一题-Cate","count":25,"path":"api/categories/力扣每日一题-Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":25,"path":"api/tags/Tag.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%A2%98%E7%9B%AE\"><span class=\"toc-text\">题目</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF\"><span class=\"toc-text\">解题思路</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">代码</span></a></li></ol>","author":{"name":"木兮xg","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2024/07/30/a1a842c36ee5df76.jpg","link":"/","description":"花有重开日，人无再少年。相逢拌酩酊，何必备芳鲜。","socials":{"github":"https://github.com/muxixg","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_60624992","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"3146. 两个字符串的排列差（24.8.24）","uid":"3ce3d18d242af69716fd71eef0e0c088","slug":"3146. 两个字符串的排列差（24.8.24）","date":"2024-08-23T16:46:44.011Z","updated":"2024-09-04T11:34:39.871Z","comments":true,"path":"api/articles/3146. 两个字符串的排列差（24.8.24）.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2024/09/04/9813f071f456e3ba.png","text":" 附：本体力扣个人解题链接 题目给你两个字符串 s 和 t，每个字符串中的字符都不重复，且 t 是 s 的一个排列。 排列差定义为 s 和 t 中每个字符在两个...","permalink":"/post/3146. 两个字符串的排列差（24.8.24）","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"力扣每日一题 - Cate","slug":"力扣每日一题-Cate","count":25,"path":"api/categories/力扣每日一题-Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":25,"path":"api/tags/Tag.json"}],"author":{"name":"木兮xg","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2024/07/30/a1a842c36ee5df76.jpg","link":"/","description":"花有重开日，人无再少年。相逢拌酩酊，何必备芳鲜。","socials":{"github":"https://github.com/muxixg","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_60624992","juejin":"","customs":{}}},"feature":false},"next_post":{"title":"3133. 数组最后一个元素的最小值（24.8.22）","uid":"cf59c4e264dda7bae571ae182b9243c4","slug":"3133. 数组最后一个元素的最小值（24.8.22）","date":"2024-08-22T03:34:27.520Z","updated":"2024-09-04T11:35:23.356Z","comments":true,"path":"api/articles/3133. 数组最后一个元素的最小值（24.8.22）.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2024/09/04/9813f071f456e3ba.png","text":"题目 给你两个整数 n 和 x 。你需要构造一个长度为 n 的 正整数 数组 nums ，对于所有 0 <= i < n - 1 ，满足 nums[i + 1]...","permalink":"/post/3133. 数组最后一个元素的最小值（24.8.22）","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"力扣每日一题 - Cate","slug":"力扣每日一题-Cate","count":25,"path":"api/categories/力扣每日一题-Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":25,"path":"api/tags/Tag.json"}],"author":{"name":"木兮xg","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2024/07/30/a1a842c36ee5df76.jpg","link":"/","description":"花有重开日，人无再少年。相逢拌酩酊，何必备芳鲜。","socials":{"github":"https://github.com/muxixg","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_60624992","juejin":"","customs":{}}},"feature":false}}