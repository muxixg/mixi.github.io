{"title":"552. 学生出勤记录 II（24.8.19）","uid":"810a463297e013419135a0d72cf2bae0","slug":"552. 学生出勤记录 II（24.8.19）","date":"2024-08-19T06:42:09.813Z","updated":"2024-09-04T11:36:17.707Z","comments":true,"path":"api/articles/552. 学生出勤记录 II（24.8.19）.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2024/09/04/9813f071f456e3ba.png","content":"<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><blockquote>\n<p>可以用字符串表示一个学生的出勤记录，其中的每个字符用来标记当天的出勤情况（缺勤、迟到、到场）。记录中只含下面三种字符：<br>‘A’：Absent，缺勤<br>‘L’：Late，迟到<br>‘P’：Present，到场<br>如果学生能够 同时 满足下面两个条件，则可以获得出勤奖励：</p>\n</blockquote>\n<blockquote>\n<p>按 总出勤 计，学生缺勤（’A’）严格 少于两天。<br>学生 不会 存在 连续 3 天或 连续 3 天以上的迟到（’L’）记录。<br>给你一个整数 n ，表示出勤记录的长度（次数）。请你返回记录长度为 n 时，可能获得出勤奖励的记录情况 数量 。答案可能很大，所以返回对 109 + 7 取余 的结果。</p>\n</blockquote>\n<blockquote>\n<p>示例 1：</p>\n<p>输入：n &#x3D; 2<br>输出：8<br>解释：<br>有 8 种长度为 2 的记录将被视为可奖励：<br>“PP” , “AP”, “PA”, “LP”, “PL”, “AL”, “LA”, “LL”<br>只有”AA”不会被视为可奖励，因为缺勤次数为 2 次（需要少于 2 次）。</p>\n</blockquote>\n<blockquote>\n<p>示例 2：</p>\n<p>输入：n &#x3D; 1<br>输出：3</p>\n</blockquote>\n<blockquote>\n<p>示例 3：<br>输入：n &#x3D; 10101<br>输出：183236316</p>\n</blockquote>\n<blockquote>\n<p>提示：<br>1 &lt;&#x3D; n &lt;&#x3D; 105</p>\n</blockquote>\n<h2 id=\"解题思路\"><a href=\"#解题思路\" class=\"headerlink\" title=\"解题思路\"></a>解题思路</h2><blockquote>\n<p>&#x2F;&#x2F;3种排列组合为<br>          1 2 3   … n<br>          3 9 27  … 3^n<br>        &#x2F;&#x2F;符合条件的 &#x3D;&#x3D; 总数（3^n） - 不符合条件的<br>           3^n 的数据明显不成立，因此要逐天考虑<br>        &#x2F;&#x2F;不符合条件的情况：<br>          至少含有2个 A，及只需要考虑2个 A 存在的情况，其余的空格排列组合即可<br>          三个连续的 L ，将 LLL 看作一个整体，进行排列组合<br>        （其中有可能存在重合的部分，比如：AALLL,采用dp 从右向左进行【只需要考虑结尾是什么】，则需要考虑 有A 和 无A 的情况，防止重复）<br>        &#x2F;&#x2F;分类讨论：<br>        【假设有 i 天，假设第 i 天符合条件数 为 dp[i] 】<br>        （1）<br>        无A：<br>             1. 第 i 天的记录为 P<br>              …P  以 p 为结尾，以 p 为结尾不会带来任何变化，只需要考虑前 i 天有几个符合要求的<br>              dp[i]&#x3D;dp[i-1]<br>             2.第 i 天的记录为 L<br>              …L 存在特殊情况：以 LLL 为结尾（…LLL），说明不符合，因此 要利用 i-1 天记录为 L 的减去 i-4 天的<br>              dp[i] &#x3D;dp[i-1]-dp[i-4]<br>        （2）<br>        有A: 第 i 个为 A<br>        [0… i-1] A [i+1 … n]<br>        dp[i-1]*dp[n-i]</p>\n</blockquote>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">checkRecord</span><span class=\"params\">(<span class=\"type\">int</span> n)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"type\">const</span> <span class=\"type\">long</span> <span class=\"type\">long</span> <span class=\"type\">int</span> MOD=<span class=\"number\">1000000007</span>;</span><br><span class=\"line\">        <span class=\"function\">vector&lt;<span class=\"type\">long</span> <span class=\"type\">long</span> <span class=\"type\">int</span>&gt; <span class=\"title\">dp</span><span class=\"params\">(n<span class=\"number\">+4</span>)</span></span>;<span class=\"comment\">//由于LLL的存在，至少要4个</span></span><br><span class=\"line\">        <span class=\"comment\">//cout&lt;&lt;dp.size();</span></span><br><span class=\"line\">    <span class=\"comment\">//dp 初始化，考虑无A的情况</span></span><br><span class=\"line\">    </span><br><span class=\"line\">        dp[<span class=\"number\">0</span>]=<span class=\"number\">1</span>; <span class=\"comment\">//1种 （2^0-0==1）</span></span><br><span class=\"line\">        dp[<span class=\"number\">1</span>]=<span class=\"number\">2</span>; <span class=\"comment\">//2种 P L （2^1-0==2）</span></span><br><span class=\"line\">        dp[<span class=\"number\">2</span>]=<span class=\"number\">4</span>; <span class=\"comment\">//4种 PP LP LL PL (2^2-0 ==4)</span></span><br><span class=\"line\">        dp[<span class=\"number\">3</span>]=<span class=\"number\">7</span>; <span class=\"comment\">//7种 PPP LPP PLP LLP LLL(X) PLL LPL PPL （2^3-1==7）</span></span><br><span class=\"line\">        </span><br><span class=\"line\">    <span class=\"comment\">//利用 dp 公式进行</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">4</span>;i&lt;=n;i++)&#123;</span><br><span class=\"line\">        dp[i]=(<span class=\"number\">2</span>*dp[i<span class=\"number\">-1</span>])%MOD+(MOD-dp[i<span class=\"number\">-4</span>])%MOD;</span><br><span class=\"line\">        dp[i]=dp[i]%MOD;<span class=\"comment\">//对自身取模，防止越界</span></span><br><span class=\"line\">        <span class=\"comment\">//dp[i]=(dp[i-1]) +  (dp[i-1]-dp[i-4])</span></span><br><span class=\"line\">        <span class=\"comment\">//      以P为结尾     以L为结尾</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//加入 A 的情况</span></span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"type\">long</span> <span class=\"type\">int</span> ans=dp[n]%MOD;<span class=\"comment\">//首先，记录无 A 的情况</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">1</span>;i&lt;=n;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        ans=(ans%MOD+(dp[i<span class=\"number\">-1</span>]*dp[n-i])%MOD)%MOD;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ans%MOD;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","feature":false,"text":"题目 可以用字符串表示一个学生的出勤记录，其中的每个字符用来标记当天的出勤情况（缺勤、迟到、到场）。记录中只含下面三种字符：‘A’：Absent，缺勤‘L’：L...","permalink":"/post/552. 学生出勤记录 II（24.8.19）","photos":[],"count_time":{"symbolsCount":"2.2k","symbolsTime":"2 mins."},"categories":[{"name":"力扣每日一题 - Cate","slug":"力扣每日一题-Cate","count":23,"path":"api/categories/力扣每日一题-Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":23,"path":"api/tags/Tag.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%A2%98%E7%9B%AE\"><span class=\"toc-text\">题目</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF\"><span class=\"toc-text\">解题思路</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">代码</span></a></li></ol>","author":{"name":"木兮xg","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2024/07/30/a1a842c36ee5df76.jpg","link":"/","description":"花有重开日，人无再少年。相逢拌酩酊，何必备芳鲜。","socials":{"github":"https://github.com/muxixg","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_60624992","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"3154. 到达第 K 级台阶的方案数（24.8.20）","uid":"3970f9e6af23a9c73779a14b099120a6","slug":"3154. 到达第 K 级台阶的方案数（24.8.20）","date":"2024-08-20T14:55:17.850Z","updated":"2024-09-04T11:34:16.874Z","comments":true,"path":"api/articles/3154. 到达第 K 级台阶的方案数（24.8.20）.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2024/09/04/9813f071f456e3ba.png","text":" 今天发晚了，嘿嘿，玩黑神话玩的 题目 给你有一个 非负 整数 k 。有一个无限长度的台阶，最低 一层编号为 0 。 Alice 有一个整数 jump ，一开始...","permalink":"/post/3154. 到达第 K 级台阶的方案数（24.8.20）","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"力扣每日一题 - Cate","slug":"力扣每日一题-Cate","count":23,"path":"api/categories/力扣每日一题-Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":23,"path":"api/tags/Tag.json"}],"author":{"name":"木兮xg","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2024/07/30/a1a842c36ee5df76.jpg","link":"/","description":"花有重开日，人无再少年。相逢拌酩酊，何必备芳鲜。","socials":{"github":"https://github.com/muxixg","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_60624992","juejin":"","customs":{}}},"feature":false},"next_post":{"title":"551. 学生出勤记录 I（24.8.18）","uid":"ccb95229756bc6d7eeab24e5c9a992af","slug":"551. 学生出勤记录 I（24.8.18）","date":"2024-08-18T06:12:33.542Z","updated":"2024-09-04T11:36:21.534Z","comments":true,"path":"api/articles/551. 学生出勤记录 I（24.8.18）.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2024/09/04/9813f071f456e3ba.png","text":"题目 给你一个字符串 s 表示一个学生的出勤记录，其中的每个字符用来标记当天的出勤情况（缺勤、迟到、到场）。记录中只含下面三种字符： ‘A’：Absent，缺勤...","permalink":"/post/551. 学生出勤记录 I（24.8.18）","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"力扣每日一题 - Cate","slug":"力扣每日一题-Cate","count":23,"path":"api/categories/力扣每日一题-Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":23,"path":"api/tags/Tag.json"}],"author":{"name":"木兮xg","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2024/07/30/a1a842c36ee5df76.jpg","link":"/","description":"花有重开日，人无再少年。相逢拌酩酊，何必备芳鲜。","socials":{"github":"https://github.com/muxixg","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_60624992","juejin":"","customs":{}}},"feature":false}}