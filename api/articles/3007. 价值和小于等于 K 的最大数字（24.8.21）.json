{"title":"3007. 价值和小于等于 K 的最大数字（24.8.21）","uid":"b6a8fdfd69b81dc71582047e56586849","slug":"3007. 价值和小于等于 K 的最大数字（24.8.21）","date":"2024-08-21T10:20:42.159Z","updated":"2024-09-04T11:35:39.558Z","comments":true,"path":"api/articles/3007. 价值和小于等于 K 的最大数字（24.8.21）.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2024/09/04/9813f071f456e3ba.png","content":"<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><p>给你一个整数 k 和一个整数 x 。整数 num 的价值是它的二进制表示中在 x，2x，3x 等位置处设置位的数目（从最低有效位开始）。下面的表格包含了如何计算价值的例子。</p>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>num</th>\n<th>Binary Representation</th>\n<th>Price</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>13</td>\n<td>000001101</td>\n<td>3</td>\n</tr>\n<tr>\n<td>2</td>\n<td>13</td>\n<td>000001101</td>\n<td>1</td>\n</tr>\n<tr>\n<td>2</td>\n<td>233</td>\n<td>011101001</td>\n<td>3</td>\n</tr>\n<tr>\n<td>3</td>\n<td>13</td>\n<td>000001101</td>\n<td>1</td>\n</tr>\n<tr>\n<td>3</td>\n<td>362</td>\n<td>101101010</td>\n<td>2</td>\n</tr>\n</tbody></table>\n<p>num 的 累加价值 是从 1 到 num 的数字的 总 价值。如果 num 的累加价值小于或等于 k 则被认为是 廉价的。</p>\n<p>请你返回 最大 的廉价数字。<br> <br></p>\n<p>示例 1：</p>\n<blockquote>\n<p>输入：k &#x3D; 9, x &#x3D; 1<br>输出：6<br>解释：由下表所示，6 是最大的廉价数字。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>num</th>\n<th>Binary Representation</th>\n<th>Price</th>\n<th>Accumulated Price</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>1</td>\n<td>1</td>\n<td>001</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>1</td>\n<td>2</td>\n<td>010</td>\n<td>1</td>\n<td>2</td>\n</tr>\n<tr>\n<td>1</td>\n<td>3</td>\n<td>011</td>\n<td>2</td>\n<td>4</td>\n</tr>\n<tr>\n<td>1</td>\n<td>4</td>\n<td>100</td>\n<td>1</td>\n<td>5</td>\n</tr>\n<tr>\n<td>1</td>\n<td>5</td>\n<td>101</td>\n<td>2</td>\n<td>7</td>\n</tr>\n<tr>\n<td>1</td>\n<td>6</td>\n<td>110</td>\n<td>2</td>\n<td>9</td>\n</tr>\n<tr>\n<td>1</td>\n<td>7</td>\n<td>111</td>\n<td>3</td>\n<td>12</td>\n</tr>\n</tbody></table>\n<p> 示例 2：</p>\n<blockquote>\n<p>输入：k &#x3D; 7, x &#x3D; 2<br>输出：9<br>解释：由下表所示，9 是最大的廉价数字。</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>num</th>\n<th>Binary Representation</th>\n<th>Price</th>\n<th>Accumulated Price</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>2</td>\n<td>1</td>\n<td>0001</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>2</td>\n<td>2</td>\n<td>0010</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>2</td>\n<td>3</td>\n<td>0011</td>\n<td>1</td>\n<td>2</td>\n</tr>\n<tr>\n<td>2</td>\n<td>4</td>\n<td>0100</td>\n<td>0</td>\n<td>2</td>\n</tr>\n<tr>\n<td>2</td>\n<td>5</td>\n<td>0101</td>\n<td>0</td>\n<td>2</td>\n</tr>\n<tr>\n<td>2</td>\n<td>6</td>\n<td>0110</td>\n<td>1</td>\n<td>3</td>\n</tr>\n<tr>\n<td>2</td>\n<td>7</td>\n<td>0111</td>\n<td>1</td>\n<td>4</td>\n</tr>\n<tr>\n<td>2</td>\n<td>8</td>\n<td>1000</td>\n<td>1</td>\n<td>5</td>\n</tr>\n<tr>\n<td>2</td>\n<td>9</td>\n<td>1001</td>\n<td>1</td>\n<td>6</td>\n</tr>\n<tr>\n<td>2</td>\n<td>10</td>\n<td>1010</td>\n<td>2</td>\n<td>8</td>\n</tr>\n</tbody></table>\n<p>提示：</p>\n<p>1 &lt;&#x3D; k &lt;&#x3D; 1015<br>1 &lt;&#x3D; x &lt;&#x3D; 8</p>\n<h2 id=\"解题思路\"><a href=\"#解题思路\" class=\"headerlink\" title=\"解题思路\"></a>解题思路</h2><p>见代码内</p>\n<h2 id=\"代码\"><a href=\"#代码\" class=\"headerlink\" title=\"代码\"></a>代码</h2><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">long</span> <span class=\"type\">long</span> <span class=\"title\">findMaximumNumber</span><span class=\"params\">(<span class=\"type\">long</span> <span class=\"type\">long</span> k, <span class=\"type\">int</span> x)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//二分查找的过程</span></span><br><span class=\"line\">        <span class=\"type\">long</span> <span class=\"type\">long</span> left=<span class=\"number\">1</span>,right=(k<span class=\"number\">+1</span>)&lt;&lt;x;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(left&lt;right)&#123;</span><br><span class=\"line\">            <span class=\"type\">long</span> <span class=\"type\">long</span> mid=(left+right<span class=\"number\">+1</span>)/<span class=\"number\">2</span>;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(<span class=\"built_in\">Sum</span>(x,mid)&gt;k)&#123;</span><br><span class=\"line\">                <span class=\"comment\">//如果比 k 大 说明答案在mid左边</span></span><br><span class=\"line\">                right=mid<span class=\"number\">-1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                <span class=\"comment\">//如果比 k 小 说明在mid右边</span></span><br><span class=\"line\">                left=mid;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"comment\">//求解从 1 到 num 所有整数在二进制表示下在 i 位置处设置位的数字之和</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">规律：</span></span><br><span class=\"line\"><span class=\"comment\">            1 2 3 4 5 6</span></span><br><span class=\"line\"><span class=\"comment\">0：         0 0 0 0 0 0</span></span><br><span class=\"line\"><span class=\"comment\">1：         0 0 0 0 0 1</span></span><br><span class=\"line\"><span class=\"comment\">2：         0 0 0 0 1 0</span></span><br><span class=\"line\"><span class=\"comment\">3：         0 0 0 0 1 1</span></span><br><span class=\"line\"><span class=\"comment\">4：         0 0 0 1 0 0</span></span><br><span class=\"line\"><span class=\"comment\">5：         0 0 0 1 0 1</span></span><br><span class=\"line\"><span class=\"comment\">6：         0 0 0 1 1 0</span></span><br><span class=\"line\"><span class=\"comment\">7：         0 0 0 1 1 1</span></span><br><span class=\"line\"><span class=\"comment\">8：         0 0 1 0 0 0</span></span><br><span class=\"line\"><span class=\"comment\">9：         0 0 1 0 0 1</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">此处从 0 开始列举，由于 0 的贡献值为 0 ，因此对本题无影响</span></span><br><span class=\"line\"><span class=\"comment\">数学规律：第 i 位的 0 ，1 存在周期性变化</span></span><br><span class=\"line\"><span class=\"comment\">        对于 i 位置 先是 2^(i-1) 个 0 后是 2^(i-1) 个 1</span></span><br><span class=\"line\"><span class=\"comment\">        得出周期为 2^(i-1)+2^(i-1) 即 2^i</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"comment\">//先得到二进制有几位（per）：1LL&lt;&lt;x</span></span><br><span class=\"line\"><span class=\"comment\">//对于在一个完整周期（ T ）内的贡献值是： T/2</span></span><br><span class=\"line\"><span class=\"comment\">//对于在一个不完整周期（ T ）内的贡献值是： </span></span><br><span class=\"line\"><span class=\"comment\">//           -不超过 T/2 ，贡献值为 0 ；</span></span><br><span class=\"line\"><span class=\"comment\">//           -超过 T/2 ，则是超过部分个 1 ，即最后一个不完整周期到 T/2 的距离    </span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">long</span> <span class=\"type\">long</span> <span class=\"title\">Sum_per</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">long</span> <span class=\"type\">long</span> num)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"type\">long</span> <span class=\"type\">long</span> per=<span class=\"number\">1LL</span>&lt;&lt;x;</span><br><span class=\"line\">        <span class=\"type\">long</span> <span class=\"type\">long</span> ans=per/<span class=\"number\">2</span>*(num/per);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(num%per&gt;=per/<span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">            ans+=num%per-(per/<span class=\"number\">2</span><span class=\"number\">-1</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"comment\">//是 num 的累加价值</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">long</span> <span class=\"type\">long</span> <span class=\"title\">Sum</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">long</span> <span class=\"type\">long</span> num)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"type\">long</span> <span class=\"type\">long</span> ans=<span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"type\">int</span> l=<span class=\"number\">64</span>-__builtin_clzll(num);<span class=\"comment\">//求出数的二进制的位数（除去前导 0 ）</span></span><br><span class=\"line\">        <span class=\"comment\">//位数不可能超过num的最高位：</span></span><br><span class=\"line\">        <span class=\"comment\">//假设位数为：x 2x 3x 4x ...nx</span></span><br><span class=\"line\">        <span class=\"comment\">//则 nx&lt;= l</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=x;i&lt;=l;i+=x)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//搜索在第 i 位的累加之和</span></span><br><span class=\"line\">            ans+=<span class=\"built_in\">Sum_per</span>(i,num);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ans;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n","feature":false,"text":"题目给你一个整数 k 和一个整数 x 。整数 num 的价值是它的二进制表示中在 x，2x，3x 等位置处设置位的数目（从最低有效位开始）。下面的表格包含了如何...","permalink":"/post/3007. 价值和小于等于 K 的最大数字（24.8.21）","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"力扣每日一题 - Cate","slug":"力扣每日一题-Cate","count":25,"path":"api/categories/力扣每日一题-Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":25,"path":"api/tags/Tag.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%A2%98%E7%9B%AE\"><span class=\"toc-text\">题目</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF\"><span class=\"toc-text\">解题思路</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">代码</span></a></li></ol>","author":{"name":"木兮xg","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2024/07/30/a1a842c36ee5df76.jpg","link":"/","description":"花有重开日，人无再少年。相逢拌酩酊，何必备芳鲜。","socials":{"github":"https://github.com/muxixg","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_60624992","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"3133. 数组最后一个元素的最小值（24.8.22）","uid":"cf59c4e264dda7bae571ae182b9243c4","slug":"3133. 数组最后一个元素的最小值（24.8.22）","date":"2024-08-22T03:34:27.520Z","updated":"2024-09-04T11:35:23.356Z","comments":true,"path":"api/articles/3133. 数组最后一个元素的最小值（24.8.22）.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2024/09/04/9813f071f456e3ba.png","text":"题目 给你两个整数 n 和 x 。你需要构造一个长度为 n 的 正整数 数组 nums ，对于所有 0 <= i < n - 1 ，满足 nums[i + 1]...","permalink":"/post/3133. 数组最后一个元素的最小值（24.8.22）","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"力扣每日一题 - Cate","slug":"力扣每日一题-Cate","count":25,"path":"api/categories/力扣每日一题-Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":25,"path":"api/tags/Tag.json"}],"author":{"name":"木兮xg","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2024/07/30/a1a842c36ee5df76.jpg","link":"/","description":"花有重开日，人无再少年。相逢拌酩酊，何必备芳鲜。","socials":{"github":"https://github.com/muxixg","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_60624992","juejin":"","customs":{}}},"feature":false},"next_post":{"title":"3154. 到达第 K 级台阶的方案数（24.8.20）","uid":"3970f9e6af23a9c73779a14b099120a6","slug":"3154. 到达第 K 级台阶的方案数（24.8.20）","date":"2024-08-20T14:55:17.850Z","updated":"2024-09-04T11:34:16.874Z","comments":true,"path":"api/articles/3154. 到达第 K 级台阶的方案数（24.8.20）.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2024/09/04/9813f071f456e3ba.png","text":" 今天发晚了，嘿嘿，玩黑神话玩的 题目 给你有一个 非负 整数 k 。有一个无限长度的台阶，最低 一层编号为 0 。 Alice 有一个整数 jump ，一开始...","permalink":"/post/3154. 到达第 K 级台阶的方案数（24.8.20）","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"力扣每日一题 - Cate","slug":"力扣每日一题-Cate","count":25,"path":"api/categories/力扣每日一题-Cate.json"}],"tags":[{"name":"Tag","slug":"Tag","count":25,"path":"api/tags/Tag.json"}],"author":{"name":"木兮xg","slug":"blog-author","avatar":"https://s3.bmp.ovh/imgs/2024/07/30/a1a842c36ee5df76.jpg","link":"/","description":"花有重开日，人无再少年。相逢拌酩酊，何必备芳鲜。","socials":{"github":"https://github.com/muxixg","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_60624992","juejin":"","customs":{}}},"feature":false}}